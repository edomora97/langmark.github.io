(function(){this.Hisogram=function(){function t(t,e){var n,r;null==e&&(e=""),this.options={title:e,width:"100%",height:400,chartArea:{width:"90%",height:"80%"},legend:{position:"none"},backgroundColor:"#eee",animation:{duration:500},tooltip:{isHtml:!0}},this.views=[];for(n in t)r=t[n],this.views[n]=r}return t.prototype.options=null,t.prototype.chart=null,t.prototype.views=null,t.prototype.currentView=null,t.prototype.setContainer=function(t){var e,n;return this.currentView=0,n=$("<div>"),e=$("<button>").addClass("btn btn-success btn-xs").text("Hide slow"),e.click(function(t){return function(){return 0===t.currentView?(e.text("Show slow"),t.draw(1)):(e.text("Hide slow"),t.draw(0))}}(this)),t.append(e),t.append(n),this.chart=new google.visualization.ColumnChart(n[0])},t.prototype.draw=function(t){return null==t&&(t=0),this.chart.draw(this.views[t],this.options),this.currentView=t},t}(),this.Lang=function(){function t(t){this.times=t}return t.prototype.times=[],t.prototype.getMin=function(){var t,e,n,r,i;for(t=1/0,i=this.times,n=0,r=i.length;r>n;n++)e=i[n],t=Math.min(t,e.time);return t},t.prototype.getAverage=function(){var t,e,n,r,i;for(i=0,r=this.times,e=0,n=r.length;n>e;e++)t=r[e],i+=t.time;return i/this.times.length},t.prototype.getRow=function(t,e){var n,r,i,o,a,s;for(a=(e-this.times.length)/2|0,o=[t],n=r=0,i=e;i>=0?i>r:r>i;n=i>=0?++r:--r)a>n||n>=a+this.times.length?o.push([0,""]):(s="<div class='column-tooltip'> <h1>"+this.times[n-a].name+"</h1> <dl> <dt>Version</dt> <dd>"+this.times[n-a].version.replace("\n","<br>")+"</dd> <dt>Time</dt> <dd>"+this.times[n-a].time.toFixed(3)+"</dd> </dl>",o.push([this.times[n-a].time,s]));return o},t}(),this.Test=function(){function t(t,e){var n,r;this.name=t;for(n in e)r=e[n],r.length>0&&(this.langs[n]=new Lang(r));this.chart=this.getHistogram()}return t.prototype.name="",t.prototype.langs={},t.prototype.chart=null,t.prototype.getAverage=function(){var t,e,n,r,i;r=0,e=0,n=this.langs;for(t in n)i=n[t],r+=i.getAverage(),e++;return r/e},t.prototype.getHistogram=function(){var t;return t=[this.getChartData(!1),this.getChartData(!0)],new Hisogram(t)},t.prototype.getColsNumber=function(){var t,e,n,r;e=0,n=this.langs;for(t in n)r=n[t],e=Math.max(e,r.times.length);return e},t.prototype.getChartData=function(t){var e,n,r,i,o,a,s,l,u,h,p,d,c;for(null==t&&(t=!1),o=new google.visualization.DataTable,r=this.getColsNumber(),o.addColumn("string","Language"),a=s=0,h=r;h>=0?h>s:s>h;a=h>=0?++s:--s)o.addColumn("number",""),o.addColumn({type:"string",role:"tooltip",p:{html:!0}});t&&(n=this.getAverage()),i=[],p=this.langs;for(l in p)c=p[l],(t===!1||c.getAverage()<n)&&i.push(c.getRow(l,r));i=i.sort(function(t,e){var n,r,i,o,s,l,u,h;for(u=n=h=r=0,a=i=1,s=t.length;s>=1?s>i:i>s;a=s>=1?++i:--i)t[a][0]&&(u+=t[a][0],n++);for(a=o=1,l=e.length;l>=1?l>o:o>l;a=l>=1?++o:--o)e[a][0]&&(h+=e[a][0],r++);return u/n-h/r}),u=[];for(e in i)d=i[e],u.push([].concat.apply([],d));return o.addRows(u),o},t}(),this.Table=function(){function t(t,e){this.lang=t,this.buildData(e)}return t.prototype.lang=null,t.prototype.data=null,t.prototype.buildData=function(t){var e,n,r,i,o,a;this.data={},o=[];for(a in t)i=t[a],r=i[this.lang],r&&o.push(function(){var t,i,o;o=[];for(n in r)e=r[n],null==(t=this.data)[i=e.name]&&(t[i]={}),o.push(this.data[e.name][a]=e.time);return o}.call(this));return o},t.prototype.getTests=function(){var t,e,n,r,i;n={},e=this.data;for(t in e){i=e[t];for(r in i)n[r]=1}return Object.keys(n).sort()},t}(),this.Analyzer=function(){function t(t,e){this.filename=t,this.name=e,this.analyzed=!1,this.tests={},this.tables={}}return t.prototype.filename=null,t.prototype.name=null,t.prototype.data=null,t.prototype.analyzed=null,t.prototype.tests=null,t.prototype.tables=null,t.prototype.loadData=function(t,e,n){return null==e&&(e=!0),this.analyzed&&n?n():t.get(this.filename).then(function(t){return function(r){return t.data=r.data,e&&t.analyze(),n?n():void 0}}(this))},t.prototype.analyze=function(){var t,e,n;if(!this.analyzed){console.log("Analysis of "+this.filename+" started"),e=this.data;for(n in e)t=e[n],this.tests[n]=new Test(n,t);return this.analyzed=!0}},t.prototype.draw=function(){return this.drawChart(),this.drawTable()},t.prototype.drawChart=function(){var t,e,n,r,i,o;$("#container").empty(),r=Object.keys(this.tests).sort(),i=[];for(t in r)o=r[t],n=this.tests[o],e=$("<div>").attr("id",o),e.append(this.getTitle(o)),$("#container").append(e),n.chart.setContainer(e),n.chart.draw(0),i.push($("#container").append("<br>"));return i},t.prototype.drawTable=function(){var t,e,n,r;n=this.getLangs(),r=[];for(t in n)e=n[t],r.push(this.tables[e]=new Table(e,this.data));return r},t.prototype.getLangs=function(){var t,e,n,r,i;r={},n=this.data;for(i in n){e=n[i];for(t in e)r[t]=1}return Object.keys(r).sort()},t.prototype.getTitle=function(t){var e;return e=$('<a href="#">'),e.text(t),e.click(function(e){return function(){return $.ajax({url:"https://raw.githubusercontent.com/langmark/langmark/master/"+t+"/README.md",dataType:"text",success:function(e){return $(".modal-body").html(marked(e)),$(".modal-title").text(t),$("#modal").modal()},error:function(){return $(".modal-body").html("<em>No description available...</em>"),$(".modal-title").text(t),$("#modal").modal()}})}}(this)),$("<h2>").append(e)},t.prototype.humanizeString=function(t){},t}()}).call(this);